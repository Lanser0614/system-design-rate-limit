### Token Bucket

Алгоритм маркерной корзины (Token Bucket) используется для контроля скорости запросов в сетевых приложениях. Его смысл состоит в том, чтобы ограничивать количество запросов, которые могут быть выполнены за определенный период времени, что помогает предотвратить перегрузку системы и улучшить общую производительность и стабильность.

Основные компоненты алгоритма маркерной корзины
Маркеры: Маркеры представляют собой разрешения на выполнение запросов. Например, если у вас есть 10 маркеров в корзине, это означает, что вы можете выполнить 10 запросов.

Корзина: Корзина хранит маркеры. У нее есть максимальная емкость, которая определяет максимальное количество маркеров, которые она может содержать.

Пополнение маркеров: Маркеры добавляются в корзину со временем с определенной скоростью. Например, 1 маркер в секунду.

Потребление маркеров: Каждый раз, когда выполняется запрос, из корзины извлекается один маркер. Если в корзине нет маркеров, запрос отклоняется.

Пример использования алгоритма
Рассмотрим пример, где корзина имеет емкость 10 маркеров и скорость пополнения 1 маркер в секунду:

Инициализация: В начале корзина заполнена до максимальной емкости - 10 маркеров.

Выполнение запросов: При каждом выполнении запроса из корзины изымается один маркер. Если приходит 5 запросов подряд, из корзины будет изъято 5 маркеров, и останется 5 маркеров.

Пополнение корзины: Если после этого нет запросов в течение 5 секунд, корзина снова будет пополнена до 10 маркеров (по 1 маркеру в секунду).

Ограничение скорости: Если поступает больше запросов, чем маркеров в корзине, например, 12 запросов за одну секунду, то после первых 10 запросов корзина будет пуста и оставшиеся 2 запроса будут отклонены с ошибкой 429 Too Many Requests.





### Leaky Bucket

Алгоритм дырявого ведра (Leaky Bucket) также используется для контроля скорости запросов в сетевых приложениях. Этот алгоритм работает аналогично алгоритму маркерной корзины (Token Bucket), но с некоторыми отличиями в механизме управления потоками.

Основные компоненты алгоритма дырявого ведра
Ведро: Ведро представляет собой очередь запросов. У ведра есть фиксированная емкость, которая определяет максимальное количество запросов, которые оно может содержать.

Утечка: Запросы "утекают" из ведра с постоянной скоростью. Это означает, что запросы обрабатываются равномерно по времени.

Добавление запросов: Когда новый запрос поступает, он добавляется в ведро. Если ведро полное, запрос отклоняется.

Пример использования алгоритма
Рассмотрим пример, где ведро имеет емкость 10 запросов и скорость утечки 1 запрос в секунду:

Инициализация: В начале ведро пустое.

Добавление запросов: Когда поступает новый запрос, он добавляется в ведро. Если ведро полное, запрос отклоняется.

Утечка запросов: Запросы обрабатываются и удаляются из ведра с постоянной скоростью (например, 1 запрос в секунду).

Ограничение скорости: Если запросы поступают быстрее, чем ведро может их "утекать", они начинают отклоняться, когда ведро заполняется.


### FixedWindowCounter

Алгоритм счетчика фиксированных интервалов (Fixed Window Counter) — это простой способ ограничения частоты запросов. Он использует фиксированные временные интервалы для учета количества запросов и контроля их частоты. В Laravel вы можете реализовать этот алгоритм с использованием Redis для хранения состояния счетчика.

Основные компоненты алгоритма Fixed Window Counter
Счетчик: Хранит количество запросов, выполненных в течение текущего временного интервала.

Временной интервал: Определяет, как часто счетчик сбрасывается (например, каждая минута, час и т.д.).

Проверка: Каждый раз, когда поступает новый запрос, проверяется текущее количество запросов в течение текущего временного интервала. Если количество запросов превышает заданный лимит, новый запрос отклоняется.
